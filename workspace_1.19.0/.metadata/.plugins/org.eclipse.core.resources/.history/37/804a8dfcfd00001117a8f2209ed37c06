#include<stm32l4xx_hal.h>
#include<stm32l476xx.h>

#define BTN_PORT	GPIOC
#define BTN_PIN		GPIO_PIN_13
#define LED_PORT	GPIOA
#define LED_PIN		GPIO_PIN_5

void pc13_btn_init();
void pa5_led_init();
void pb13_led_init();

int counter;

//BTN = PC13  ,Bus = AHB2EN bit 0
//LED = PA5  ,Bus = AHB2EN  bit 2  OR PB13

uint8_t buttonstatus;

int main()
{
	HAL_Init();

	pa5_led_init();
	pc13_btn_init();

//	pb13_led_init();

//	while(1)
//	{
//		buttonstatus = HAL_GPIO_ReadPin (BTN_PORT, BTN_PIN);
//		HAL_GPIO_WritePin (GPIOA, GPIO_PIN_5, buttonstatus);
//	}

	while(1)
	{
	    HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5, GPIO_PIN_SET);  // LED ON
	}

}





void pc13_btn_init()
	{
		GPIO_InitTypeDef   GPIO_InitStruct = {0};

		__HAL_RCC_GPIOC_CLK_ENABLE();

		GPIO_InitStruct.Pin = BTN_PIN;
		GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
		GPIO_InitStruct.Pull = GPIO_PULLUP;
		GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;

		HAL_GPIO_Init(BTN_PORT , &GPIO_InitStruct);
	}

void pa5_led_init()
	{
		GPIO_InitTypeDef   GPIO_InitStruct = {0};

		__HAL_RCC_GPIOA_CLK_ENABLE();


		GPIO_InitStruct.Pin = GPIO_PIN_5;
		GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
		GPIO_InitStruct.Pull = GPIO_NOPULL;
		GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;

		HAL_GPIO_Init(LED_PORT , &GPIO_InitStruct);
}

void pb13_led_init()
	{
		GPIO_InitTypeDef   GPIO_InitStruct = {0};

		__HAL_RCC_GPIOB_CLK_ENABLE();


		GPIO_InitStruct.Pin = GPIO_PIN_13;
		GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
		GPIO_InitStruct.Pull = GPIO_NOPULL;
		GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;

		HAL_GPIO_Init(GPIOB , &GPIO_InitStruct);
}
